<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <title>Miniscript Playground</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
  </head>
  <body>
    
    
    <!-- Contenedor envoltorio -->
    <div class="main-wrapper">
      
      <!-- Contenido superior -->
      <div class="top-panel">
        <div class="top-panel-inner">
          <img src="./btcLogo.png" alt="Logo" class="top-panel-logo">
          <h1> Miniscript Playground  </h1>
          <span class="top-panel-right">ğŸ›</span>
        </div>
      </div>

      <div class="container">

        <!-- Columna izquierda: MenÃº de pÃ³lizas -->
        <div class="menu">
          <h2>ğŸ—‚ï¸ PÃ³lizas disponibles</h2>

          
          <div class="button-row">
            <button class="app-button" onclick="setActiveButton(this); loadProjectByURL('htmls/herencia.html')">ğŸ§¬ Herencia digital </button>
          </div>
          <div class="button-row">
            <button class="app-button" onclick="setActiveButton(this); loadProjectByURL('htmls/autocustodia.html')">ğŸ¤– Autocustodia programada </button>
          </div>
          <div class="button-row">
            <button class="app-button" onclick="setActiveButton(this); loadProjectByURL('htmls/boveda.html')">ğŸ¦ BÃ³veda de seguridad</button>
          </div>
          <div id="output" class="output-console"></div>
        </div>
      
          <!-- Columna derecha: Contenido del proyecto -->
          <div class="content">
            <h2></h2>
            <div id="content"></div>
          </div>

      </div>
    </div>

    <script>

      function setActiveButton(button) {
        document.querySelectorAll('.menu .app-button').forEach(btn => btn.classList.remove('active'));
        button.classList.add('active');
      }

      // Variable para almacenar el proyecto actual cargado, para evitar recargas innecesarias
      let proyectoActual = null;

      function loadProjectByURL(proyectoUrl) {

        const scriptName = proyectoUrl.split('/').pop().split('.')[0];
        if (proyectoActual === scriptName) return;
        proyectoActual = scriptName;

        // Cargar el contenido de la pÃ¡gina seleccionada usando la URL proporcionada
        fetch(proyectoUrl)
          .then(response => {
            if (!response.ok) {
              throw new Error('Error al cargar el contenido: ' + response.statusText);
            }
            return response.text();
          })
          .then(html => {
            document.getElementById('content').innerHTML = html;
    
            // Extraer el nombre del archivo sin la carpeta ni la extensiÃ³n ej: htmls/autocustodia.html >> autocustodia
            const scriptName = proyectoUrl.split('/').pop().split('.')[0];
    
            // Solo aÃ±adir el script si no existe ya en el DOM
            if (!document.querySelector(`script[src="./dist/${scriptName}.bundle.js"]`)) {
              const script = document.createElement('script');
              script.src = `./dist/${scriptName}.bundle.js`;
              document.body.appendChild(script); // AÃ±adir al final del body
            }
        

// AÃ±adir el Ã¡rbol de emojis segÃºn el proyecto seleccionado
if (scriptName === 'autocustodia') {
  document.getElementById('output').innerHTML = `<pre>
<span><span style="font-size:1.5em;">ğŸ¤–</span><span style="font-size:1.2em;"><b> Autocustodia programada </b></span></span>
â”‚    
â”‚
â”œâ”€ ğŸ—“ï¸ <b>Uso diario: ğŸ”‘ğŸ”‘ â¡ï¸ ğŸ”ğŸ”ğŸ” </b>
â”‚  â”‚ 
â”‚  â”œâ”€ ğŸ”‘ Llave principal 
â”‚  â”‚ 
â”‚  â”œâ”€ ğŸ”‘ Llave secundaria
â”‚  â”‚ 
â”‚  â””â”€ ğŸ—ï¸ Llave del custodio
â”‚    
â”‚    
â”œâ”€ ğŸ›¡ï¸<b> RecuperaciÃ³n ğŸ•’ 3 meses: ğŸ”‘ â¡ï¸ ğŸ”ğŸ” </b>
â”‚  â”‚ 
â”‚  â”œâ”€ ğŸ”‘ Llave de respaldo principal
â”‚  â”‚ 
â”‚  â””â”€ ğŸ”‘ Llave de respaldo secundaria
â”‚    
â”‚    
â””â”€ ğŸš¨<b> Emergencia â° 5 meses: ğŸ—ï¸ â¡ï¸ ğŸ” </b>
   â”‚ 
   â””â”€ ğŸ—ï¸ Llave de apertura por perdida
</pre>
  `;
} else if (scriptName === 'boveda') {
  document.getElementById('output').innerHTML = `<pre>
<span><span style="font-size:1.5em;">ğŸ¦</span><span style="font-size:1.2em;"><b> BÃ³veda de seguridad </b></span></span>
â”‚
â”‚
â”œâ”€ ğŸ”§ <b>Apertura forzada ğŸ•’ 72 horas: ğŸ”‘ â¡ï¸ ğŸ” </b>
â”‚  â”‚ 
â”‚  â””â”€ ğŸ”‘ Llave de apetura retardada
â”‚
â”‚
â””â”€ ğŸ†˜ <b>BotÃ³n del pÃ¡nico: ğŸ—ï¸ â¡ï¸ ğŸ” </b>
   â”‚
   â””â”€ ğŸ—ï¸ Llave de apertura inmediata
</pre>
  `;

} else if (scriptName === 'herencia') {
  document.getElementById('output').innerHTML = `<pre>
<span><span style="font-size:1.5em;">ğŸ§¬</span><span style="font-size:1.2em;"><b> Herencia digital </b></span></span>
â”‚
â”‚
â”œâ”€ ğŸ§“ğŸ» <b>Acceso directo: ğŸ”‘ â¡ï¸ ğŸ” </b>
â”‚  â”‚ 
â”‚  â””â”€ ğŸ”‘ Llave del progenitor
â”‚
â”‚
â”œâ”€ ğŸ§‘ğŸ»ğŸ‘¨ğŸ» <b>Herencia ğŸ•’ 3 aÃ±os: ğŸ”‘ğŸ”‘ â¡ï¸ ğŸ”ğŸ” </b>
â”‚  â”‚ 
â”‚  â”œâ”€ ğŸ”‘ Llave de la heredera
â”‚  â”‚ 
â”‚  â””â”€ ğŸ”‘ Llave del heredero
â”‚
â”‚
â””â”€ ğŸ‘¤ <b>Disputa â° 5 aÃ±os: ğŸ—ï¸ â¡ï¸ ğŸ” </b>
   â”‚ 
   â””â”€ ğŸ—ï¸ Llave del abogado
</pre>
  `;

} else {
  document.getElementById('output').innerHTML = '';
}
              })
            .catch(error => {
              console.error('Error:', error);
              document.getElementById('content').innerHTML = `<p>Error al cargar el proyecto: ${error.message}</p>`;
            });
        }
      
    
      // Autocargar el primer proyecto al iniciar
      document.addEventListener('DOMContentLoaded', () => {
        // Selecciona el primer botÃ³n del menÃº (Herencua)
        const firstButton = document.querySelector('.menu .app-button');
        if (firstButton) {
          setActiveButton(firstButton);
        }
        loadProjectByURL('htmls/herencia.html');
      });
    
    </script>
  </body>
</html>