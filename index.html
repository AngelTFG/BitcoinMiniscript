<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <title>Miniscript playground</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
  </head>
  <body>
    
    <h1>Miniscript playground</h1>

    <div class="container">

      <!-- Columna izquierda: MenÃº de proyectos -->
      <div class="menu">

        <h2>ğŸ—ï¸ Condiciones de gasto</h2>

        <!-- ğŸŸ¦ Fila 1: BotÃ³n Autocustodia -->
        <div class="button-row">
          <button class="app-button" onclick="setActiveButton(this); loadProjectByURL('/htmls/autocustodia.html')">ğŸ¤– Autocustodia programada</button>
        </div>

        <!-- ğŸŸ© Fila 2: BotÃ³n BÃ³veda -->
        <div class="button-row">
          <button class="app-button" onclick="setActiveButton(this); loadProjectByURL('/htmls/boveda.html')">ğŸ¦ BÃ³veda de seguridad</button>
        </div>

        <!-- ğŸŸ§ Fila 3: BotÃ³n Herencia -->
        <div class="button-row">
          <button class="app-button" onclick="setActiveButton(this); loadProjectByURL('/htmls/herencia.html')">ğŸ§¬ Herencia digital</button>
        </div>
        <div id="output" class="output-console"></div>
      </div>
    
        <!-- Columna derecha: Contenido del proyecto -->
        <div class="content">
          <h2></h2>
          <div id="content"></div>
        </div>

    </div>

      <script>

          function setActiveButton(button) {
            document.querySelectorAll('.menu .app-button').forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
          }


          function loadProjectByURL(proyectoUrl) {

            // Cargar el contenido de la pÃ¡gina seleccionada usando la URL proporcionada
            fetch(proyectoUrl)
              .then(response => {
                if (!response.ok) {
                  throw new Error('Error al cargar el contenido: ' + response.statusText);
                }
                return response.text();
              })
              .then(html => {
                document.getElementById('content').innerHTML = html;
        
                // Extraer el nombre del archivo sin la carpeta ni la extensiÃ³n autocustodia.html >> autocustodia
                const scriptName = proyectoUrl.split('/').pop().split('.')[0];
        
                // Eliminar scripts anteriores del mismo tipo si existen para evitar duplicados
                const oldScript = document.querySelector(`script[src="./dist/${scriptName}.bundle.js"]`);
                if (oldScript) {
                  oldScript.remove();
                }
        
                // Cargar un script especÃ­fico para la pÃ¡gina
                const script = document.createElement('script');
                script.src = `./dist/${scriptName}.bundle.js`;
                document.body.appendChild(script); // AÃ±adir al final del body
        
// ğŸ‘‰ AÃ±adir el Ã¡rbol de emojis segÃºn el proyecto seleccionado
if (scriptName === 'autocustodia') {
  document.getElementById('output').innerHTML = `<pre>
ğŸŒ³ <span style="color:blue;">DescripciÃ³n de las ramas de gasto</span> ğŸŒ³


<b>ğŸ¤– Autocustodia programada</b>
â”‚    
â”œâ”€ ğŸ—“ï¸ <b>Diario: ğŸ”‘ğŸ”‘ de ğŸ”‘ğŸ”‘ğŸ”‘</b>
â”‚  â”‚ 
â”‚  â”œâ”€ âœğŸ¼ @key_daily1
â”‚  â”‚ 
â”‚  â”œâ”€ âœğŸ¼ @key_daily2
â”‚  â”‚ 
â”‚  â””â”€ âœğŸ¼ @key_daily3
â”‚    
â”œâ”€ ğŸ›¡ï¸<b> RecuperaciÃ³n: ğŸ”‘ de ğŸ”‘ğŸ”‘ ğŸ”› ğŸ•’ 5 bloques</b>
â”‚  â”‚ 
â”‚  â”œâ”€ âœğŸ¼ @key_recovery_1
â”‚  â”‚ 
â”‚  â””â”€ âœğŸ¼ @key_recovery_2
â”‚    
â””â”€ ğŸš¨<b> Emergencia: ğŸ”‘ ğŸ”› â° 10 bloques</b>
   â”‚ 
   â””â”€ âœğŸ¼ @key_emergency
</pre>
  `;
} else if (scriptName === 'boveda') {
  document.getElementById('output').innerHTML = `<pre>
ğŸŒ³ <span style="color:blue;">DescripciÃ³n de las ramas de gasto</span> ğŸŒ³


<b>ğŸ¦ BÃ³veda de seguridad</b>
â”‚
â”œâ”€ â³ <b>Apertura retardada: ğŸ”‘ ğŸ”› ğŸ•’ 5 bloques</b>
â”‚  â”‚ 
â”‚  â””â”€ âœğŸ¼ @key_vault2
â”‚
â””â”€ ğŸ†˜ <b>BotÃ³n del pÃ¡nico: ğŸ”‘</b>
   â”‚ 
   â””â”€ âœğŸ¼ @key_emergency
</pre>
  `;

} else if (scriptName === 'herencia') {
  document.getElementById('output').innerHTML = `<pre>
ğŸŒ³ <span style="color:blue;">DescripciÃ³n de las ramas de gasto</span> ğŸŒ³


<b>ğŸ§¬ Herencia digital</b>
â”‚
â”œâ”€ ğŸ§“ğŸ» <b>Progenitor: ğŸ”‘</b>
â”‚  â”‚ 
â”‚  â””â”€ âœğŸ¼ @key_parent
â”‚
â”œâ”€ ğŸ§‘ğŸ»ğŸ‘¨ğŸ» <b>Herencia: ğŸ”‘ğŸ”‘ de ğŸ”‘ğŸ”‘ ğŸ”› ğŸ•’ 5 bloques</b>
â”‚  â”‚ 
â”‚  â”œâ”€ âœğŸ¼ @key_heir1
â”‚  â”‚ 
â”‚  â””â”€ âœğŸ¼ @key_heir2
â”‚
â””â”€ ğŸ§‘ğŸ»â€âš–ï¸ <b>RecuperaciÃ³n: ğŸ”‘ ğŸ”› â° 10 bloques</b>
   â”‚ 
   â””â”€ âœğŸ¼ @key_recovery
</pre>
  `;

} else {
  document.getElementById('output').innerHTML = '';
}
                })
              .catch(error => {
                console.error('Error:', error);
                document.getElementById('content').innerHTML = `<p>Error al cargar el proyecto: ${error.message}</p>`;
              });
          }
        
      
        // Autocargar el primer proyecto al iniciar
        document.addEventListener('DOMContentLoaded', () => {
          // Selecciona el primer botÃ³n del menÃº (Autocustodia)
          const firstButton = document.querySelector('.menu .app-button');
          if (firstButton) {
            setActiveButton(firstButton);
          }
          loadProjectByURL('/htmls/autocustodia.html');
        });
      
      </script>
  </body>
</html>